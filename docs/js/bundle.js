!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){},function(e,t,n){"use strict";n.r(t);const r=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],a=["Понедельник","Вторник","Среда","Четверг","Пятница","Суббота","Воскресенье"];function o(e){return 0===e?6:e-1}function c(e){e.classList.remove("hidden")}function i(e){e.classList.add("hidden")}function l(){let e=document.querySelector(".content__container"),t=document.querySelector(".event");t&&(i(t),e.appendChild(t))}function d(){document.querySelector(".top__search-results").innerHTML=""}function s(){let e=document.querySelector(".day--active");e&&e.classList.remove("day--active")}function u(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}let f=new Date;function p(e){"string"==typeof e&&(e=new Date(e));let t=v(),n=t.indexOf(t.find(t=>u(new Date(t.date),e)));return{index:n,event:t[n]}}function m(e){let t=p(e.date).index;-1!==t?function(e,t){let n=v();n[e]=t,_(n)}(t,e):function(e){let t=v();t.push(e),_(t)}(e),h(f)}function v(){return JSON.parse(localStorage.getItem("planner-events"))||[]}function _(e){localStorage.setItem("planner-events",JSON.stringify(e))}function y(e,t){let n=new Date,r=document.createElement("TD");r.classList.add("day"),u(n,e)&&r.classList.add("day--today"),r.dataset.date=e;let c=document.createElement("SPAN");c.classList.add("day__date"),c.innerHTML=t?`${a[o(e.getDay())]}, ${e.getDate()}`:`${e.getDate()}`,r.appendChild(c);let i=p(e).event;if(i){let e=document.createElement("DIV");e.classList.add("day__content"),e.innerHTML=`\n      <div>${i.name}</div>\n      <div>${i.participants}</div>\n      <div>${i.description}</div>\n    `,r.classList.add("day--with-event"),r.appendChild(e)}return r}function g(e){l(),document.querySelector(".content").innerHTML="";let t=e.getFullYear(),n=e.getMonth();!function(e,t){document.querySelector(".date__current").innerHTML=`${r[e]} ${t}`}(n,t),function(e,t,n){let r=document.querySelector(".content"),o=Math.round(n.length/a.length),c=0;for(let i=0;i<o;i++){let o=document.createElement("TR");o.classList.add("content__week");for(let r=0;r<a.length;r++){let r=y(new Date(e,t,n[c]),c<7);o.appendChild(r),++c}r.appendChild(o)}}(t,n,function(e,t){let n=new Date(t,e+1,0).getDate(),r=[...new Array(n).keys()].map(e=>e+1),c=o(new Date(t,e,1).getDay()),i=o(new Date(t,e+1,0).getDay());if(0!==c){let e=0;for(let t=0;t<c;t++)r.unshift(e),e--}if(6!==i){let e=n+1;for(let t=0;t<a.length-i;t++)r.push(e),e++}return r}(n,t))}function h(e,t){if("string"==typeof e&&(e=new Date(e)),function(e){f=e}(e),g(f),t){[...document.querySelectorAll(".day")].find(t=>u(e,new Date(t.dataset.date))).click()}}function L(e){let t=new Date(e.dataset.date),n=document.querySelector(".event");e.appendChild(n),c(n),n.querySelector(".event__date").value=`${t.getDate()}`;let r=n.querySelector(".event__name"),a=n.querySelector(".event__participants"),o=n.querySelector(".event__description"),i=n.querySelector(".event__form-clear"),l=p(t).event||{name:"",participants:"",description:""};r.value=l.name,a.value=l.participants,o.value=l.description,i.disabled=-1===p(t).index,n.dataset.date=e.dataset.date,function(e){let t=document.querySelector(".content"),n=document.querySelector(".event");t.clientWidth-(e.offsetLeft+e.clientWidth)<n.clientWidth?n.classList.add("event--left"):n.classList.remove("event--left")}(e)}function S(){let e=document.querySelector(".top__search-results"),t=document.createElement("DIV");t.innerHTML="no results!",e.appendChild(t)}function q(){document.querySelector(".top__event-text").value="",i(document.querySelector(".top__event-container"));let e=document.querySelector(".top__event-show");e.disabled=!1}n(0);g(f);let w=document.querySelector("body"),D=document.querySelector(".top__event-show"),b=document.querySelector(".top__event-close"),M=document.querySelector(".top__event-confirm"),E=document.querySelector(".top__search-input"),C=document.querySelector(".date"),x=document.querySelector(".content");w.addEventListener("click",function(e){e.target.closest(".content")||(s(),l()),e.target.closest(".top__search")||d(),e.target.closest(".top__event")||q()},!0),D.addEventListener("click",function(e){c(document.querySelector(".top__event-container")),e.target.disabled=!0}),b.addEventListener("click",q),M.addEventListener("click",function(){let e=document.querySelector(".top__event-text").value.trim().split(",").map(e=>e.trim());if(e.length<4||e.some((e,t)=>0===e.length&&t<4))return alert("wrong info format!");if(e[0].split(" ").length<2)return alert("wrong date format!");let t=Number(e[0].split(" ")[0]),n=e[0].split(" ")[1];r.some((e,t)=>{if(n.slice(0,-1).toLowerCase()===e.slice(0,-1).toLowerCase()||n.slice(0,-1).toLowerCase()===e.toLowerCase())return n=t,!0});let a=new Date((new Date).getFullYear(),n,t);if(Number.isNaN(Date.parse(a)))return alert("errors in date validation!");m({date:a,name:e[1],participants:e[2],description:e.slice(3).join(", ")}),h(a,!0)}),C.addEventListener("click",function(e){let t=e.target.classList.contains("date__prev"),n=e.target.classList.contains("date__next"),r=e.target.classList.contains("date__today");t||n?h(new Date(f.getFullYear(),f.getMonth()-(t?1:-1))):r&&h(new Date,!0)}),x.addEventListener("click",function(e){let t=e.target.closest(".day");if(t&&!e.target.closest(".event"))s(),t.classList.add("day--active"),L(t);else if(e.target.closest(".event")){let t=document.querySelector(".event");if(e.target.classList.contains("event__form-close"))s(),l();else if(e.target.classList.contains("event__form-confirm")){let e=new Date(t.dataset.date),n=t.querySelector(".event__name").value.trim(),r=t.querySelector(".event__participants").value.trim(),a=t.querySelector(".event__description").value.trim(),o={date:e,name:n,participants:r,description:a};if(!n||!r||!a)return alert("Заполните все поля!");m(o)}else e.target.classList.contains("event__form-clear")&&confirm("Do you want do delete this event?")&&(!function(e){let t=v();t.splice(e,1),_(t)}(p(new Date(t.dataset.date)).index),h(f))}}),E.addEventListener("input",function(e){let t=e.target.value.trim();d(),function(e){let t=document.querySelector(".top__search-results"),n=v();if(!n.length)return void S();let r=document.createElement("UL");r.classList.add("top__search-results-list"),n.forEach(t=>{if(-1!==t.name.toLowerCase().indexOf(e.toLowerCase())){let e=document.createElement("LI");e.classList.add("top__search-results-item");let n=new Date(t.date);e.dataset.date=n,e.innerHTML=`\n        <div class='top__search-name'>${t.name}</div>\n        <div class='top__search-date'>${n.getDate()}.${n.getMonth()+1}.${n.getFullYear()}</div>\n      `,r.appendChild(e)}}),r.children.length?(r.addEventListener("click",e=>{let t=e.target.closest("LI");t&&h(new Date(t.dataset.date),!0)}),t.appendChild(r)):S()}(t)})}]);
//# sourceMappingURL=bundle.js.map